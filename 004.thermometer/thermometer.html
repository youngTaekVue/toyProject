<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .donation-meter {
            /* 눈금과 기둥을 가로로 나란히 배치하기 위해 Flexbox 사용 */
            display: flex;
            align-items: flex-end; /* 모든 요소를 아래쪽으로 정렬 */
            width: 150px; /* 눈금과 기둥을 모두 포함할 수 있는 충분한 너비 */
            height: 400px; /* 전체 온도계 높이 */
            margin-left: 30px;
            position: relative; /* 자식 요소의 absolute 기준 */
        }

        .glass {
            background: #e5e5e5;
            border-radius: 100px 100px 0 0;
            display: block;
            height: 300px;
            margin: 0 35px 10px;
            padding: 0 5px;
            position: relative;
            width: 20px;
        }

        /* === 눈금 정렬 핵심 === */
        .markings-container {
            height: 300px;
            width: 50px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: absolute;
            right: 120px;
            bottom: 80px;
            z-index: 99;
        }

        .label {
            font-size: 12px;
            line-height: 1;
            color: #333;
            position: relative;
            padding-right: 15px; /* 숫자와 눈금선 사이 간격 */
            text-align: right;
            width: 100%;

        }

        /* 눈금 선 생성 */
        .label::after {
            content: '';
            position: absolute;
            right: 0; /* 오른쪽 끝에 배치 */
            top: 50%;
            transform: translateY(-50%);
            height: 1px;
            width: 10px; /* 눈금 선 길이 */
            background-color: #333;

        }

        /* 0도 눈금 강조 */
        .label.zero {
            font-weight: bold;
            color: #f34e54; /* 붉은색으로 강조 */
        }

        .amount {
            /*background: #f34e54;*/
            border-radius: 100px 100px 0 0;
            display: block;
            width: 20px;
            position: absolute;
            bottom: 0;
            z-index: 9;
            /*background: #6EBDFF;*/
            background: linear-gradient(0deg, rgba(110, 189, 255, 1) 0%, rgba(156, 210, 255, 1) 100%);
        }

        .bulb {
            background: #e5e5e5;
            border-radius: 100px;
            display: block;
            height: 50px;
            margin: 0 35px 10px;
            padding: 5px;
            position: relative;
            top: -20px;
            right: 15px;
            width: 50px;
        }

        .circle {
            /*background: #f34e54;*/
            border-radius: 100px;
            display: block;
            height: 50px;
            width: 50px;
            /*background: #6EBDFF;*/
            background: linear-gradient(180deg, rgba(110, 189, 255, 1) 0%, rgba(73, 116, 255, 0.5) 100%);
        }

        .filler {
            background: #f34e54; /* 붉은색으로 강조 */;
            /*border-radius: 100px 100px 0 0;*/
            display: block;
            height: 15px;
            width: 20px;
            position: relative;
            top: -55px;
            right: -15px;
            z-index: 99;
        }
    </style>
    <title>온도계</title>
    <script>
        window.addEventListener('load', function () {
            let current_temp = 0;
            getTempColor(current_temp);

        });
        const colorMap = [
            // 0도 미만 (Light Blue) - 기존 코드 유지
            {
                temp: 0,
                color: '#4d6997', // 대표색: 푸른 계열
                amount_style: 'linear-gradient(0deg, rgba(105, 179, 255, 1) 0%, rgba(156, 210, 255, 1) 100%)', // 밝은하늘 → 중간하늘
                circle_style: 'linear-gradient(180deg, rgba(110, 189, 255, 1) 0%, rgba(73, 116, 255, 0.5) 100%)' // 중간하늘 → 대표색(투명)
            },
            // 5도 미만 (Blue-Green)
            {
                temp: 5,
                color: '#51889b', // 대표색: 청록 계열
                amount_style: 'linear-gradient(0deg, rgba(122, 197, 212, 1) 0%, rgba(172, 222, 230, 1) 100%)', // 밝은청록 → 중간청록
                circle_style: 'linear-gradient(180deg, rgba(127, 204, 218, 1) 0%, rgba(81, 136, 155, 0.5) 100%)' // 중간청록 → 대표색(투명)
            },
            // 9도 미만 (Greenish)
            {
                temp: 9,
                color: '#65987e', // 대표색: 녹색 계열
                amount_style: 'linear-gradient(0deg, rgba(198, 214, 129, 1) 0%, rgba(180, 227, 199, 1) 100%)', // 밝은녹색 → 중간녹색
                circle_style: 'linear-gradient(180deg, rgba(141, 214, 178, 1) 0%, rgba(101, 152, 126, 0.5) 100%)' // 중간녹색 → 대표색(투명)
            },
            // 12도 미만 (Yellow-Green)
            {
                temp: 12,
                color: '#a6b343', // 대표색: 연두 계열
                amount_style: 'linear-gradient(0deg, rgba(202, 218, 137, 1) 0%, rgba(223, 234, 178, 1) 100%)', // 밝은연두 → 중간연두
                circle_style: 'linear-gradient(180deg, rgba(202, 218, 137, 1) 0%, rgba(166, 179, 67, 0.5) 100%)' // 중간연두 → 대표색(투명)
            },
            // 17도 미만 (Yellow)
            {
                temp: 17,
                color: '#e3bf42', // 대표색: 노란 계열
                amount_style: 'linear-gradient(0deg, rgba(252, 230, 122, 1) 0%, rgba(255, 243, 173, 1) 100%)', // 밝은노랑 → 중간노랑
                circle_style: 'linear-gradient(180deg, rgba(255, 235, 128, 1) 0%, rgba(227, 191, 66, 0.5) 100%)' // 중간노랑 → 대표색(투명)
            },
            // 20도 미만 (Light Orange)
            {
                temp: 20,
                color: '#f8c052', // 대표색: 밝은 주황 계열
                amount_style: 'linear-gradient(0deg, rgba(255, 255, 147, 1) 0%, rgba(255, 238, 194, 1) 100%)', // 밝은주황 → 중간주황
                circle_style: 'linear-gradient(180deg, rgba(255, 228, 154, 1) 0%, rgba(248, 192, 82, 0.5) 100%)' // 중간주황 → 대표색(투명)
            },
            // 23도 미만 (Orange)
            {
                temp: 23,
                color: '#f2974a', // 대표색: 주황 계열
                amount_style: 'linear-gradient(0deg, rgba(254, 184, 132, 1) 0%, rgba(255, 211, 177, 1) 100%)', // 밝은주황 → 중간주황
                circle_style: 'linear-gradient(180deg, rgba(255, 187, 138, 1) 0%, rgba(242, 151, 74, 0.5) 100%)' // 중간주황 → 대표색(투명)
            },
            // 28도 이상 (Red)
            {
                temp: 28,
                color: '#ed473e', // 대표색: 빨강 계열
                amount_style: 'linear-gradient(0deg, rgba(253, 130, 125, 1) 0%, rgba(255, 179, 177, 1) 100%)', // 밝은빨강 → 중간빨강
                circle_style: 'linear-gradient(180deg, rgba(255, 137, 133, 1) 0%, rgba(237, 71, 62, 0.5) 100%)' // 중간빨강 → 대표색(투명)
            }
        ];

        function getTempColor(temp) {
            const T_MIN = -20;
            const T_MAX = 40;

            // 높이 계산 및 0%~100% 제한
            let height = ((temp - T_MIN) / (T_MAX - T_MIN)) * 100;
            height = Math.max(0, Math.min(100, height));

            // DOM 요소
            let amount = document.getElementById("amount");
            let circle = document.getElementById("circle");

            // colorMap 정의가 함수 밖에 있다면 내부로 가져오거나 전역 변수임을 확인하세요.
            // (현재는 colorMap이 정의되었다고 가정하고 진행합니다.)

            // 1. 스타일 정보를 담을 변수들을 colorMap[0]으로 초기화
            let matchedColor = colorMap[0].color;
            let amountColor = colorMap[0].amount_style;
            let circleColor = colorMap[0].circle_style;

            // 2. 루프를 돌면서 해당 온도에 맞는 스타일 정보를 찾습니다.
            for (let i = 0; i < colorMap.length; i++) {
                const item = colorMap[i];

                // 현재 온도가 임계값 이상인 경우
                if (temp >= item.temp) {
                    // 임계값을 통과했으므로, 현재 아이템의 스타일 정보를 '후보'로 저장하고 다음 단계로 진행합니다.
                    matchedColor = item.color;
                    amountColor = item.amount_style;
                    circleColor = item.circle_style;
                } else {
                    // 현재 온도가 임계값 미만인 경우 (temp < item.temp)
                    // -> '이전' 단계의 색상 정보가 우리가 찾는 최종 정보입니다.
                    // 이미 'matchedColor' 등에 '이전' 단계의 정보가 저장되어 있거나 (i>0)
                    // 초기화된 'colorMap[0]' 정보 그대로 유지되어야 합니다 (i=0).

                    // 더 이상 루프를 진행할 필요가 없으므로 즉시 종료합니다.
                    break;
                }
            }

            // 3. 루프 종료 후, 최종 결정된 정보를 DOM에 적용합니다.
            if (amount && circle) {
                amount.style.height = height + "%"; // 높이 적용!
                amount.style.background = matchedColor;
                amount.style.backgroundImage = amountColor;

                circle.style.background = matchedColor;
                circle.style.backgroundImage = circleColor;
            }

            return matchedColor;
        }
    </script>

</head>
<body>
<div class="donation-meter">

    <div class="markings-container">
        <span class="label">40°</span>
        <span class="label">30°</span>
        <span class="label">20°</span>
        <span class="label">10°</span>
        <span class="label zero">0°</span>
        <span class="label">-10°</span>
        <span class="label">-20°</span>
    </div>

    <div class="column-container">
            <span class="glass">
                <span class="amount" id="amount"></span>
            </span>

        <div class="bulb">
            <span class="circle" id="circle"></span>
        </div>
    </div>

</div>

</body>
</html>